算法
====

关于算法我们主要介绍hash算法和公私钥加密技术。区块链是结合多个技术的各自特点出现的一种新的技术架构，hash算法和加密技术为区块链的自证信任化及安全控制提供了基础。


Hash算法的特性
--------------

简单理解hash算法就是一种单向的加密，将一个明文加密成为密文，其过程不可逆推。优秀的hash算法具有以下特点：

**正向快速：** 给定明文和 hash 算法，在有限时间和有限资源内能计算出 hash 值。

**逆向困难：** 给定多个 hash 值，在有限的时间内不可能通过hash寻找到规律而逆推出明文。 

**输入敏感：** 原始输入信息修改一点信息，产生的 hash 值看起来应该都有很大不同。

**冲突避免：** 很难找到两段内容不同的明文，使得它们的 hash 值一致。



Hash算法在区块链中的应用
-----------------------

每个区块中比较重要的几个属性如下：

1. 上一个区块的hash，由上一个区块计算得出

2. 时间戳，区块产生的时间

3. 交易树的根hash，区块打包的所有交易生成的hash

基本上所有的区块链都会包含以上三个属性，而除了时间戳以外，其他的两个hash都是需要hash算法来得到的。

目前常用的hash算法有MD5，SHA系列算法。在区块链中很多地方都用到了hash函数，比如：

1. 区块链中节点的地址、公钥、私钥的计算。

2. MerkelTrie树是一种将默克尔树和前缀树相结合的树结构。






BU链的默克尔前缀树的构成
----------------------

对数据存储比较了解的都知道默克尔树。它的特性是：根hash的结果只与树中数据的集合有关，我们利用这个特性可以快速判断两个数据集合是否相同。

对于数据集合中的每一条(K,V)来说，K决定了一条数据在树中的位置，V决定了hash。(K,V)数据集合共同决定了根hash。当修改、添加、或删除树中的数据时，只需要重算变化节点所在的路径即可。修改任何一条数据必然引起根hash的变化，这是默克尔树的基本特征。

前缀树又称为字典树，在前缀树中，节点的key就是节点的路径，是一种用于快速检索的多叉树结构。对于前缀树来说，根节点不包含字符，除根节点外的每一个子节点都包含一个字符。从根节点到某一个节点，路径上经过的字符连接起来，为该节点对应的key。每个节点的所有子节点包含的字符互不相同。

将默克尔树和前缀树结合，可以同时提高树的对比、校验和查找速度。

